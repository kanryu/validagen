# Validagen
A validator generator for structs/maps for your go applications.

## Features
- Simplicity
- Efficient validators are automatically generated(for ozzo-validation/v4)
- Prevent bugs by declaratively writing validator settings
- Generating a validator for the struct automatically generated by oapi-codegen
- (planned) Automatic generation of unit tests for validators

## How to use

e.g. There is a struct.

```go
type Address struct {
	Street string
	City   string
	State  string
	Zip    string
	Mail   string
	People int
	Food   string
	Income float64
}
```

You will write a toml as `example.toml`.

```toml
# Type: struct or map
Type="struct"
# MethodName: (optional) method name of the validator. Validate is default

# Validators.XXX: Validator information for struct XXX
[Validators.Address]
# Package: Validator package name
Package = "example"
# Name: (optional) struct identifier. key name is substituted as default
# Dir: (optional) Directory to output validator source code. Package name is default
# FileName: (optional) Validator file name. "[Package]_validator.go" is the default
FileName = "address_validator.go"
# FileMode: (optional) file mode of the validator source code 0644 is default
# Import: (optional) Add additional packages when validator source code imports them
Import = []
# Properties: validators for each field of struct
Properties.Street.Type = "string"
Properties.Street.Required = true
Properties.Street.Length = [5,50]
Properties.People.Type = "int"
Properties.People.Required = true
Properties.People.In = {Int=[1,2,3]}
Properties.Income.Type = "float"
Properties.Income.Required = true
Properties.Income.In = {Float=[1.1,2.2,3.3]}
Properties.Food.Type = "string"
Properties.Food.Required = true
Properties.Food.In = {String=["Cheeze", "Milk", "Meat"]}
Properties.State.Type = "string"
Properties.State.Required = true
Properties.State.match = "^[A-Z]{2}$"
Properties.Mail.Type = "string"
Properties.Mail.Required = true
Properties.Mail.Email = true
```

You will run validagen

```bash
validagen generate example.toml
```

You can find `example/address_validator.go`

```go
// Code generated by github.com/kanryu/validagen. DO NOT EDIT.
package example

import (
	"regexp"
	"github.com/go-ozzo/ozzo-validation/v4/is"
	validation "github.com/go-ozzo/ozzo-validation/v4"
)

// Validate validater for Address struct
func (a Address) Validate() error {
	return validation.ValidateStruct(&a,
		validation.Field(&a.Food, validation.In("Cheeze", "Milk", "Meat"), validation.Required),
		validation.Field(&a.Income, validation.In(1.1, 2.2, 3.3), validation.Required),
		validation.Field(&a.Mail, validation.Required, is.Email),
		validation.Field(&a.People, validation.In(1, 2, 3), validation.Required),
		validation.Field(&a.State, validation.Match(regexp.MustCompile("^[A-Z]{2}$")), validation.Required),
		validation.Field(&a.Street, validation.Length(5,50), validation.Required),
	)
}
```

## Author
KATO Kanryu(k.kanryu@gmail.com)

## License
MIT

